<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2585px" preserveAspectRatio="none" style="width:1798px;height:2585px;" version="1.1" viewBox="0 0 1798 2585" width="1798px" zoomAndPan="magnify"><defs><filter height="300%" id="f1xeb34zlp2zun" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="454" x="667.5" y="26.708">Diagrama de Sequência - Simulador de Hidrômetro</text><rect fill="#FFFFFF" filter="url(#f1xeb34zlp2zun)" height="2277.7031" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="169" y="195.5156"/><rect fill="#FFFFFF" filter="url(#f1xeb34zlp2zun)" height="2248.5703" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="308" y="224.6484"/><rect fill="#FFFFFF" filter="url(#f1xeb34zlp2zun)" height="2155.1719" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="458" y="253.7813"/><rect fill="#FFFFFF" filter="url(#f1xeb34zlp2zun)" height="2096.9063" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="734" y="282.9141"/><rect fill="#FFFFFF" filter="url(#f1xeb34zlp2zun)" height="2025.6406" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="927" y="383.3125"/><rect fill="#FFFFFF" filter="url(#f1xeb34zlp2zun)" height="1906.1094" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1071" y="567.1094"/><rect fill="#FFFFFF" filter="url(#f1xeb34zlp2zun)" height="1380.9844" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1278" y="840.1719"/><rect fill="#FFFFFF" filter="url(#f1xeb34zlp2zun)" height="1380.9844" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1398" y="869.3047"/><rect fill="#FFFFFF" filter="url(#f1xeb34zlp2zun)" height="1695.7461" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1521" y="496.2773"/><rect fill="#FFFFFF" filter="url(#f1xeb34zlp2zun)" height="169.6641" style="stroke: #000000; stroke-width: 2.0;" width="802" x="677" y="884.3047"/><rect fill="#FFFFFF" filter="url(#f1xeb34zlp2zun)" height="201.7969" style="stroke: #000000; stroke-width: 2.0;" width="914.5" x="861.5" y="1067.9688"/><rect fill="#FFFFFF" filter="url(#f1xeb34zlp2zun)" height="289.1953" style="stroke: #000000; stroke-width: 2.0;" width="1117.5" x="405.5" y="1283.7656"/><rect fill="#FFFFFF" filter="url(#f1xeb34zlp2zun)" height="390.2656" style="stroke: #000000; stroke-width: 2.0;" width="391.5" x="129" y="1630.0938"/><rect fill="#FFFFFF" filter="url(#f1xeb34zlp2zun)" height="116.2031" style="stroke: #000000; stroke-width: 2.0;" width="195" x="139" y="1855.0234"/><rect fill="#FFFFFF" height="56.9375" style="stroke: none; stroke-width: 1.0;" width="195" x="139" y="1914.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="27" x2="27" y1="121.25" y2="2498.2188"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="174" x2="174" y1="121.25" y2="2498.2188"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="313" x2="313" y1="121.25" y2="2498.2188"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="462.5" x2="462.5" y1="121.25" y2="2498.2188"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="739" x2="739" y1="121.25" y2="2498.2188"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="931.5" x2="931.5" y1="121.25" y2="2498.2188"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1076" x2="1076" y1="121.25" y2="2498.2188"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1283" x2="1283" y1="121.25" y2="2498.2188"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1402.5" x2="1402.5" y1="121.25" y2="2498.2188"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1525.5" x2="1525.5" y1="121.25" y2="2498.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="8" y="117.9482">User</text><ellipse cx="27" cy="47.9531" fill="#FEFECE" filter="url(#f1xeb34zlp2zun)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M27,55.9531 L27,82.9531 M14,63.9531 L40,63.9531 M27,82.9531 L14,97.9531 M27,82.9531 L40,97.9531 " fill="none" filter="url(#f1xeb34zlp2zun)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="8" y="2510.2139">User</text><ellipse cx="27" cy="2523.5156" fill="#FEFECE" filter="url(#f1xeb34zlp2zun)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M27,2531.5156 L27,2558.5156 M14,2539.5156 L40,2539.5156 M27,2558.5156 L14,2573.5156 M27,2558.5156 L40,2573.5156 " fill="none" filter="url(#f1xeb34zlp2zun)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f1xeb34zlp2zun)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="46" x="149" y="85.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="156" y="105.9482">Main</text><rect fill="#FEFECE" filter="url(#f1xeb34zlp2zun)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="46" x="149" y="2497.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="156" y="2517.2139">Main</text><rect fill="#FEFECE" filter="url(#f1xeb34zlp2zun)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="78" x="272" y="85.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64" x="279" y="105.9482">Simulator</text><rect fill="#FEFECE" filter="url(#f1xeb34zlp2zun)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="78" x="272" y="2497.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64" x="279" y="2517.2139">Simulator</text><rect fill="#FEFECE" filter="url(#f1xeb34zlp2zun)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="91" x="415.5" y="85.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="77" x="422.5" y="105.9482">Hidrometer</text><rect fill="#FEFECE" filter="url(#f1xeb34zlp2zun)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="91" x="415.5" y="2497.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="77" x="422.5" y="2517.2139">Hidrometer</text><rect fill="#FEFECE" filter="url(#f1xeb34zlp2zun)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="687" y="85.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="694" y="105.9482">PipeIN : Pipe</text><rect fill="#FEFECE" filter="url(#f1xeb34zlp2zun)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="687" y="2497.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="694" y="2517.2139">PipeIN : Pipe</text><rect fill="#FEFECE" filter="url(#f1xeb34zlp2zun)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="117" x="871.5" y="85.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="103" x="878.5" y="105.9482">PipeOUT : Pipe</text><rect fill="#FEFECE" filter="url(#f1xeb34zlp2zun)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="117" x="871.5" y="2497.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="103" x="878.5" y="2517.2139">PipeOUT : Pipe</text><rect fill="#FEFECE" filter="url(#f1xeb34zlp2zun)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="1046" y="85.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="1053" y="105.9482">Image</text><rect fill="#FEFECE" filter="url(#f1xeb34zlp2zun)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="1046" y="2497.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="1053" y="2517.2139">Image</text><rect fill="#FEFECE" filter="url(#f1xeb34zlp2zun)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="98" x="1232" y="85.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="1239" y="105.9482">InputThread</text><rect fill="#FEFECE" filter="url(#f1xeb34zlp2zun)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="98" x="1232" y="2497.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="1239" y="2517.2139">InputThread</text><rect fill="#FEFECE" filter="url(#f1xeb34zlp2zun)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="105" x="1348.5" y="85.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="91" x="1355.5" y="105.9482">ImageThread</text><rect fill="#FEFECE" filter="url(#f1xeb34zlp2zun)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="105" x="1348.5" y="2497.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="91" x="1355.5" y="2517.2139">ImageThread</text><rect fill="#FEFECE" filter="url(#f1xeb34zlp2zun)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="113" x="1467.5" y="85.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="99" x="1474.5" y="105.9482">UpdateThread</text><rect fill="#FEFECE" filter="url(#f1xeb34zlp2zun)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="113" x="1467.5" y="2497.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="99" x="1474.5" y="2517.2139">UpdateThread</text><rect fill="#FFFFFF" filter="url(#f1xeb34zlp2zun)" height="2277.7031" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="169" y="195.5156"/><rect fill="#FFFFFF" filter="url(#f1xeb34zlp2zun)" height="2248.5703" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="308" y="224.6484"/><rect fill="#FFFFFF" filter="url(#f1xeb34zlp2zun)" height="2155.1719" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="458" y="253.7813"/><rect fill="#FFFFFF" filter="url(#f1xeb34zlp2zun)" height="2096.9063" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="734" y="282.9141"/><rect fill="#FFFFFF" filter="url(#f1xeb34zlp2zun)" height="2025.6406" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="927" y="383.3125"/><rect fill="#FFFFFF" filter="url(#f1xeb34zlp2zun)" height="1906.1094" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1071" y="567.1094"/><rect fill="#FFFFFF" filter="url(#f1xeb34zlp2zun)" height="1380.9844" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1278" y="840.1719"/><rect fill="#FFFFFF" filter="url(#f1xeb34zlp2zun)" height="1380.9844" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1398" y="869.3047"/><rect fill="#FFFFFF" filter="url(#f1xeb34zlp2zun)" height="1695.7461" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1521" y="496.2773"/><rect fill="#EEEEEE" filter="url(#f1xeb34zlp2zun)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1783" x="3" y="151.8164"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1786" y1="151.8164" y2="151.8164"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1786" y1="154.8164" y2="154.8164"/><rect fill="#EEEEEE" filter="url(#f1xeb34zlp2zun)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="108" x="840.5" y="141.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="89" x="846.5" y="157.3169">Inicialização</text><polygon fill="#A80036" points="157,191.5156,167,195.5156,157,199.5156,161,195.5156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="27" x2="163" y1="195.5156" y2="195.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="34" y="190.4497">Executar programa</text><polygon fill="#A80036" points="296,220.6484,306,224.6484,296,228.6484,300,224.6484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="179" x2="302" y1="224.6484" y2="224.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="186" y="219.5825">new Simulator()</text><polygon fill="#A80036" points="446,249.7813,456,253.7813,446,257.7813,450,253.7813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="318" x2="452" y1="253.7813" y2="253.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="325" y="248.7153">new Hidrometer()</text><polygon fill="#A80036" points="722,278.9141,732,282.9141,722,286.9141,726,282.9141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="468" x2="728" y1="282.9141" y2="282.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="247" x="475" y="277.8481">new Pipe(diameter, length, roughness)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="744" x2="786" y1="312.0469" y2="312.0469"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="786" x2="786" y1="312.0469" y2="325.0469"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="745" x2="786" y1="325.0469" y2="325.0469"/><polygon fill="#A80036" points="755,321.0469,745,325.0469,755,329.0469,751,325.0469" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="751" y="306.981">calculateMaxFlow()</text><polygon fill="#A80036" points="479,350.1797,469,354.1797,479,358.1797,475,354.1797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="473" x2="733" y1="354.1797" y2="354.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="70" x="485" y="349.1138">Pipe criado</text><polygon fill="#A80036" points="915,379.3125,925,383.3125,915,387.3125,919,383.3125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="468" x2="921" y1="383.3125" y2="383.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="247" x="475" y="378.2466">new Pipe(diameter, length, roughness)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="937" x2="979" y1="412.4453" y2="412.4453"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="979" x2="979" y1="412.4453" y2="425.4453"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="938" x2="979" y1="425.4453" y2="425.4453"/><polygon fill="#A80036" points="948,421.4453,938,425.4453,948,429.4453,944,425.4453" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="944" y="407.3794">calculateMaxFlow()</text><polygon fill="#A80036" points="479,450.5781,469,454.5781,479,458.5781,475,454.5781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="473" x2="926" y1="454.5781" y2="454.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="70" x="485" y="449.5122">Pipe criado</text><polygon fill="#A80036" points="1509,492.2773,1519,496.2773,1509,500.2773,1513,496.2773" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="468" x2="1515" y1="496.2773" y2="496.2773"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="217" x="475" y="491.2114">std::thread(&amp;Hidrometer::update)</text><path d="M1536,467.5781 L1536,507.5781 L1745,507.5781 L1745,477.5781 L1735,467.5781 L1536,467.5781 " fill="#FBFB77" filter="url(#f1xeb34zlp2zun)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1735,467.5781 L1735,477.5781 L1745,477.5781 L1735,467.5781 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="188" x="1542" y="484.645">Thread própria do hidrômetro</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="1542" y="499.7778">inicia em loop contínuo</text><polygon fill="#A80036" points="329,533.9766,319,537.9766,329,541.9766,325,537.9766" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="323" x2="457" y1="537.9766" y2="537.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="335" y="532.9106">Hidrometer criado</text><polygon fill="#A80036" points="1059,563.1094,1069,567.1094,1059,571.1094,1063,567.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="318" x2="1065" y1="567.1094" y2="567.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="325" y="562.0435">new Image(400, 400)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1081" x2="1123" y1="596.2422" y2="596.2422"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1123" x2="1123" y1="596.2422" y2="609.2422"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1082" x2="1123" y1="609.2422" y2="609.2422"/><polygon fill="#A80036" points="1092,605.2422,1082,609.2422,1092,613.2422,1088,609.2422" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="1088" y="591.1763">cairo_create_surface()</text><polygon fill="#A80036" points="329,634.375,319,638.375,329,642.375,325,638.375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="323" x2="1070" y1="638.375" y2="638.375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="335" y="633.3091">Image criada</text><polygon fill="#A80036" points="190,663.5078,180,667.5078,190,671.5078,186,667.5078" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="184" x2="307" y1="667.5078" y2="667.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="196" y="662.4419">Simulator criado</text><rect fill="#EEEEEE" filter="url(#f1xeb34zlp2zun)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1783" x="3" y="696.0742"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1786" y1="696.0742" y2="696.0742"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1786" y1="699.0742" y2="699.0742"/><rect fill="#EEEEEE" filter="url(#f1xeb34zlp2zun)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="192" x="798.5" y="685.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="173" x="804.5" y="701.5747">Execução da Simulação</text><polygon fill="#A80036" points="296,735.7734,306,739.7734,296,743.7734,300,739.7734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="179" x2="302" y1="739.7734" y2="739.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="186" y="734.7075">run()</text><polygon fill="#A80036" points="446,764.9063,456,768.9063,446,772.9063,450,768.9063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="318" x2="452" y1="768.9063" y2="768.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="325" y="763.8403">activate()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="468" x2="510" y1="798.0391" y2="798.0391"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="510" x2="510" y1="798.0391" y2="811.0391"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="469" x2="510" y1="811.0391" y2="811.0391"/><polygon fill="#A80036" points="479,807.0391,469,811.0391,479,815.0391,475,811.0391" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="475" y="792.9731">status = true</text><polygon fill="#A80036" points="1266,836.1719,1276,840.1719,1266,844.1719,1270,840.1719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="318" x2="1272" y1="840.1719" y2="840.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="223" x="325" y="835.106">std::thread(&amp;Simulator::throwFlow)</text><polygon fill="#A80036" points="1386,865.3047,1396,869.3047,1386,873.3047,1390,869.3047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="318" x2="1392" y1="869.3047" y2="869.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="279" x="325" y="864.2388">std::thread(&amp;Simulator::imageUpdateLoop)</text><path d="M677,884.3047 L754,884.3047 L754,891.3047 L744,901.3047 L677,901.3047 L677,884.3047 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="169.6641" style="stroke: #000000; stroke-width: 2.0;" width="802" x="677" y="884.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="692" y="897.3716">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="218" x="769" y="896.5151">[Geração de Vazão (InputThread)]</text><polygon fill="#A80036" points="755,918.5703,745,922.5703,755,926.5703,751,922.5703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="749" x2="1277" y1="922.5703" y2="922.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="761" y="917.5044">setFlowRate(randomFlow)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="744" x2="786" y1="951.7031" y2="951.7031"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="786" x2="786" y1="951.7031" y2="964.7031"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="745" x2="786" y1="964.7031" y2="964.7031"/><polygon fill="#A80036" points="755,960.7031,745,964.7031,755,968.7031,751,964.7031" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="751" y="946.6372">validar vazão &lt;= maxFlow</text><polygon fill="#A80036" points="948,994.8359,938,998.8359,948,1002.8359,944,998.8359" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="942" x2="1277" y1="998.8359" y2="998.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="954" y="993.77">setFlowRate(flowIN * 0.9)</text><path d="M1293,977.7031 L1293,1002.7031 L1465,1002.7031 L1465,987.7031 L1455,977.7031 L1293,977.7031 " fill="#FBFB77" filter="url(#f1xeb34zlp2zun)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1455,977.7031 L1455,987.7031 L1465,987.7031 L1455,977.7031 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="1299" y="994.77">Perda de 10% simulada</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1288" x2="1330" y1="1032.9688" y2="1032.9688"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1330" x2="1330" y1="1032.9688" y2="1045.9688"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1289" x2="1330" y1="1045.9688" y2="1045.9688"/><polygon fill="#A80036" points="1299,1041.9688,1289,1045.9688,1299,1049.9688,1295,1045.9688" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="1295" y="1027.9028">sleep(1000ms)</text><path d="M861.5,1067.9688 L938.5,1067.9688 L938.5,1074.9688 L928.5,1084.9688 L861.5,1084.9688 L861.5,1067.9688 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="201.7969" style="stroke: #000000; stroke-width: 2.0;" width="914.5" x="861.5" y="1067.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="876.5" y="1081.0356">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="265" x="953.5" y="1080.1792">[Atualização Hidrômetro (UpdateThread)]</text><polygon fill="#A80036" points="948,1102.2344,938,1106.2344,948,1110.2344,944,1106.2344" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="942" x2="1520" y1="1106.2344" y2="1106.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="954" y="1101.1685">getFlowRate()</text><polygon fill="#A80036" points="1509,1131.3672,1519,1135.3672,1509,1139.3672,1513,1135.3672" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="937" x2="1515" y1="1135.3672" y2="1135.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="73" x="944" y="1130.3013">currentFlow</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1531" x2="1573" y1="1164.5" y2="1164.5"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1573" x2="1573" y1="1164.5" y2="1177.5"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1532" x2="1573" y1="1177.5" y2="1177.5"/><polygon fill="#A80036" points="1542,1173.5,1532,1177.5,1542,1181.5,1538,1177.5" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="226" x="1538" y="1159.4341">volume += flow * deltaTime * 1000</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1531" x2="1573" y1="1206.6328" y2="1206.6328"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1573" x2="1573" y1="1206.6328" y2="1219.6328"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1532" x2="1573" y1="1219.6328" y2="1219.6328"/><polygon fill="#A80036" points="1542,1215.6328,1532,1219.6328,1542,1223.6328,1538,1219.6328" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="1538" y="1201.5669">counter = (int)counterFloat</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1531" x2="1573" y1="1248.7656" y2="1248.7656"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1573" x2="1573" y1="1248.7656" y2="1261.7656"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1532" x2="1573" y1="1261.7656" y2="1261.7656"/><polygon fill="#A80036" points="1542,1257.7656,1532,1261.7656,1542,1265.7656,1538,1261.7656" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="1538" y="1243.6997">sleep(100ms)</text><path d="M405.5,1283.7656 L482.5,1283.7656 L482.5,1290.7656 L472.5,1300.7656 L405.5,1300.7656 L405.5,1283.7656 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="289.1953" style="stroke: #000000; stroke-width: 2.0;" width="1117.5" x="405.5" y="1283.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="420.5" y="1296.8325">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="239" x="497.5" y="1295.9761">[Geração de Imagens (ImageThread)]</text><polygon fill="#A80036" points="479,1318.0313,469,1322.0313,479,1326.0313,475,1322.0313" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="473" x2="1397" y1="1322.0313" y2="1322.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="82" x="485" y="1316.9653">getCounter()</text><polygon fill="#A80036" points="1386,1347.1641,1396,1351.1641,1386,1355.1641,1390,1351.1641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="468" x2="1392" y1="1351.1641" y2="1351.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="475" y="1346.0981">currentCounter</text><polygon fill="#A80036" points="755,1376.2969,745,1380.2969,755,1384.2969,751,1380.2969" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="749" x2="1397" y1="1380.2969" y2="1380.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="761" y="1375.231">getFlowRate()</text><polygon fill="#A80036" points="1386,1405.4297,1396,1409.4297,1386,1413.4297,1390,1409.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="744" x2="1392" y1="1409.4297" y2="1409.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="73" x="751" y="1404.3638">currentFlow</text><polygon fill="#A80036" points="1092,1434.5625,1082,1438.5625,1092,1442.5625,1088,1438.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1086" x2="1397" y1="1438.5625" y2="1438.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="196" x="1098" y="1433.4966">generate_image(counter, flow)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1081" x2="1123" y1="1467.6953" y2="1467.6953"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1123" x2="1123" y1="1467.6953" y2="1480.6953"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1082" x2="1123" y1="1480.6953" y2="1480.6953"/><polygon fill="#A80036" points="1092,1476.6953,1082,1480.6953,1092,1484.6953,1088,1480.6953" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="178" x="1088" y="1462.6294">draw_realistic_hydrometer()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1081" x2="1123" y1="1509.8281" y2="1509.8281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1123" x2="1123" y1="1509.8281" y2="1522.8281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1082" x2="1123" y1="1522.8281" y2="1522.8281"/><polygon fill="#A80036" points="1092,1518.8281,1082,1522.8281,1092,1526.8281,1088,1522.8281" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="183" x="1088" y="1504.7622">cairo_surface_write_to_png()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1408" x2="1450" y1="1551.9609" y2="1551.9609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1450" x2="1450" y1="1551.9609" y2="1564.9609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1409" x2="1450" y1="1564.9609" y2="1564.9609"/><polygon fill="#A80036" points="1419,1560.9609,1409,1564.9609,1419,1568.9609,1415,1564.9609" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="1415" y="1546.895">sleep(3000ms)</text><rect fill="#EEEEEE" filter="url(#f1xeb34zlp2zun)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1783" x="3" y="1600.5273"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1786" y1="1600.5273" y2="1600.5273"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1786" y1="1603.5273" y2="1603.5273"/><rect fill="#EEEEEE" filter="url(#f1xeb34zlp2zun)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="131" x="829" y="1589.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="112" x="835" y="1606.0278">Monitoramento</text><path d="M129,1630.0938 L206,1630.0938 L206,1637.0938 L196,1647.0938 L129,1647.0938 L129,1630.0938 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="390.2656" style="stroke: #000000; stroke-width: 2.0;" width="391.5" x="129" y="1630.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="144" y="1643.1606">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="201" x="221" y="1642.3042">[Monitoramento (Main Thread)]</text><polygon fill="#A80036" points="296,1664.3594,306,1668.3594,296,1672.3594,300,1668.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="179" x2="302" y1="1668.3594" y2="1668.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="82" x="186" y="1663.2935">getCounter()</text><polygon fill="#A80036" points="446,1693.4922,456,1697.4922,446,1701.4922,450,1697.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="318" x2="452" y1="1697.4922" y2="1697.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="82" x="325" y="1692.4263">getCounter()</text><polygon fill="#A80036" points="329,1722.625,319,1726.625,329,1730.625,325,1726.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="323" x2="457" y1="1726.625" y2="1726.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="335" y="1721.5591">counter</text><polygon fill="#A80036" points="190,1751.7578,180,1755.7578,190,1759.7578,186,1755.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="184" x2="307" y1="1755.7578" y2="1755.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="196" y="1750.6919">counter</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="179" x2="221" y1="1784.8906" y2="1784.8906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="221" x2="221" y1="1784.8906" y2="1797.8906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="180" x2="221" y1="1797.8906" y2="1797.8906"/><polygon fill="#A80036" points="190,1793.8906,180,1797.8906,190,1801.8906,186,1797.8906" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="186" y="1779.8247">display status</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="179" x2="221" y1="1827.0234" y2="1827.0234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="221" x2="221" y1="1827.0234" y2="1840.0234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="180" x2="221" y1="1840.0234" y2="1840.0234"/><polygon fill="#A80036" points="190,1836.0234,180,1840.0234,190,1844.0234,186,1840.0234" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="186" y="1821.9575">check user input</text><path d="M139,1855.0234 L203,1855.0234 L203,1862.0234 L193,1872.0234 L139,1872.0234 L139,1855.0234 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="116.2031" style="stroke: #000000; stroke-width: 2.0;" width="195" x="139" y="1855.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="154" y="1868.0903">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="111" x="218" y="1867.2339">[User presses 'q']</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="179" x2="221" y1="1893.2891" y2="1893.2891"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="221" x2="221" y1="1893.2891" y2="1906.2891"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="180" x2="221" y1="1906.2891" y2="1906.2891"/><polygon fill="#A80036" points="190,1902.2891,180,1906.2891,190,1910.2891,186,1906.2891" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67" x="186" y="1888.2231">break loop</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="139" x2="334" y1="1915.2891" y2="1915.2891"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="118" x="144" y="1925.4995">[Counter &gt;= 200L]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="179" x2="221" y1="1950.2266" y2="1950.2266"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="221" x2="221" y1="1950.2266" y2="1963.2266"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="180" x2="221" y1="1963.2266" y2="1963.2266"/><polygon fill="#A80036" points="190,1959.2266,180,1963.2266,190,1967.2266,186,1963.2266" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67" x="186" y="1945.1606">break loop</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="179" x2="221" y1="1999.3594" y2="1999.3594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="221" x2="221" y1="1999.3594" y2="2012.3594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="180" x2="221" y1="2012.3594" y2="2012.3594"/><polygon fill="#A80036" points="190,2008.3594,180,2012.3594,190,2016.3594,186,2012.3594" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="186" y="1994.2935">sleep(2000ms)</text><rect fill="#EEEEEE" filter="url(#f1xeb34zlp2zun)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1783" x="3" y="2047.9258"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1786" y1="2047.9258" y2="2047.9258"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1786" y1="2050.9258" y2="2050.9258"/><rect fill="#EEEEEE" filter="url(#f1xeb34zlp2zun)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="101" x="844" y="2037.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="850" y="2053.4263">Finalização</text><polygon fill="#A80036" points="296,2087.625,306,2091.625,296,2095.625,300,2091.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="179" x2="302" y1="2091.625" y2="2091.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="38" x="186" y="2086.5591">stop()</text><polygon fill="#A80036" points="446,2116.7578,456,2120.7578,446,2124.7578,450,2120.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="318" x2="452" y1="2120.7578" y2="2120.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="325" y="2115.6919">deactivate()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="468" x2="510" y1="2149.8906" y2="2149.8906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="510" x2="510" y1="2149.8906" y2="2162.8906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="469" x2="510" y1="2162.8906" y2="2162.8906"/><polygon fill="#A80036" points="479,2158.8906,469,2162.8906,479,2166.8906,475,2162.8906" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="475" y="2144.8247">status = false</text><polygon fill="#A80036" points="1514,2188.0234,1524,2192.0234,1514,2196.0234,1518,2192.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="468" x2="1520" y1="2192.0234" y2="2192.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="475" y="2186.9575">running = false</text><polygon fill="#A80036" points="1271,2217.1563,1281,2221.1563,1271,2225.1563,1275,2221.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="318" x2="1277" y1="2221.1563" y2="2221.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="325" y="2216.0903">running = false</text><polygon fill="#A80036" points="1391,2246.2891,1401,2250.2891,1391,2254.2891,1395,2250.2891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="318" x2="1397" y1="2250.2891" y2="2250.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="325" y="2245.2231">running = false</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="318" x2="360" y1="2279.4219" y2="2279.4219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="360" x2="360" y1="2279.4219" y2="2292.4219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="319" x2="360" y1="2292.4219" y2="2292.4219"/><polygon fill="#A80036" points="329,2288.4219,319,2292.4219,329,2296.4219,325,2292.4219" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="325" y="2274.356">join all threads</text><polygon fill="#A80036" points="296,2317.5547,306,2321.5547,296,2325.5547,300,2321.5547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="179" x2="302" y1="2321.5547" y2="2321.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="186" y="2316.4888">~Simulator()</text><polygon fill="#A80036" points="446,2346.6875,456,2350.6875,446,2354.6875,450,2350.6875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="318" x2="452" y1="2350.6875" y2="2350.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="325" y="2345.6216">~Hidrometer()</text><polygon fill="#A80036" points="727,2375.8203,737,2379.8203,727,2383.8203,731,2379.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="468" x2="733" y1="2379.8203" y2="2379.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="475" y="2374.7544">~Pipe()</text><polygon fill="#A80036" points="920,2404.9531,930,2408.9531,920,2412.9531,924,2408.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="463" x2="926" y1="2408.9531" y2="2408.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="470" y="2403.8872">~Pipe()</text><polygon fill="#A80036" points="1059,2434.0859,1069,2438.0859,1059,2442.0859,1063,2438.0859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="318" x2="1065" y1="2438.0859" y2="2438.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="325" y="2433.02">~Image()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1081" x2="1123" y1="2472.2188" y2="2472.2188"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1123" x2="1123" y1="2472.2188" y2="2485.2188"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1076" x2="1123" y1="2485.2188" y2="2485.2188"/><polygon fill="#A80036" points="1086,2481.2188,1076,2485.2188,1086,2489.2188,1082,2485.2188" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="1088" y="2467.1528">cairo_destroy()</text><!--MD5=[a036e2c86d236d27760e68deaf58092f]
@startuml Hydrometer_Sequence_Diagram

title Diagrama de Sequência - Simulador de Hidrômetro

actor User
participant Main
participant Simulator
participant Hidrometer  
participant "PipeIN : Pipe" as PipeIN
participant "PipeOUT : Pipe" as PipeOUT
participant Image
participant "InputThread" as IT
participant "ImageThread" as ImgT
participant "UpdateThread" as UT

== Inicialização ==
User -> Main : Executar programa
activate Main

Main -> Simulator : new Simulator()
activate Simulator

Simulator -> Hidrometer : new Hidrometer()
activate Hidrometer

Hidrometer -> PipeIN : new Pipe(diameter, length, roughness)
activate PipeIN
PipeIN -> PipeIN : calculateMaxFlow()
PipeIN - -> Hidrometer : Pipe criado

Hidrometer -> PipeOUT : new Pipe(diameter, length, roughness)
activate PipeOUT
PipeOUT -> PipeOUT : calculateMaxFlow()
PipeOUT - -> Hidrometer : Pipe criado

Hidrometer -> UT : std::thread(&Hidrometer::update)
activate UT
note right : Thread própria do hidrômetro\ninicia em loop contínuo

Hidrometer - -> Simulator : Hidrometer criado

Simulator -> Image : new Image(400, 400)
activate Image
Image -> Image : cairo_create_surface()
Image - -> Simulator : Image criada

Simulator - -> Main : Simulator criado

== Execução da Simulação ==
Main -> Simulator : run()

Simulator -> Hidrometer : activate()
Hidrometer -> Hidrometer : status = true

Simulator -> IT : std::thread(&Simulator::throwFlow)
activate IT

Simulator -> ImgT : std::thread(&Simulator::imageUpdateLoop)
activate ImgT

loop Geração de Vazão (InputThread)
    IT -> PipeIN : setFlowRate(randomFlow)
    PipeIN -> PipeIN : validar vazão <= maxFlow
    IT -> PipeOUT : setFlowRate(flowIN * 0.9)
    note right : Perda de 10% simulada
    IT -> IT : sleep(1000ms)
end

loop Atualização Hidrômetro (UpdateThread)
    UT -> PipeOUT : getFlowRate()
    PipeOUT - -> UT : currentFlow
    UT -> UT : volume += flow * deltaTime * 1000
    UT -> UT : counter = (int)counterFloat
    UT -> UT : sleep(100ms)
end

loop Geração de Imagens (ImageThread)
    ImgT -> Hidrometer : getCounter()
    Hidrometer - -> ImgT : currentCounter
    ImgT -> PipeIN : getFlowRate()
    PipeIN - -> ImgT : currentFlow
    ImgT -> Image : generate_image(counter, flow)
    Image -> Image : draw_realistic_hydrometer()
    Image -> Image : cairo_surface_write_to_png()
    ImgT -> ImgT : sleep(3000ms)
end

== Monitoramento ==
loop Monitoramento (Main Thread)
    Main -> Simulator : getCounter()
    Simulator -> Hidrometer : getCounter()
    Hidrometer - -> Simulator : counter
    Simulator - -> Main : counter
    Main -> Main : display status
    Main -> Main : check user input
    alt User presses 'q'
        Main -> Main : break loop
    else Counter >= 200L
        Main -> Main : break loop
    end
    Main -> Main : sleep(2000ms)
end

== Finalização ==
Main -> Simulator : stop()

Simulator -> Hidrometer : deactivate()
Hidrometer -> Hidrometer : status = false
Hidrometer -> UT : running = false
deactivate UT

Simulator -> IT : running = false
deactivate IT

Simulator -> ImgT : running = false  
deactivate ImgT

Simulator -> Simulator : join all threads

Main -> Simulator : ~Simulator()
Simulator -> Hidrometer : ~Hidrometer()
Hidrometer -> PipeIN : ~Pipe()
deactivate PipeIN
Hidrometer -> PipeOUT : ~Pipe()
deactivate PipeOUT
deactivate Hidrometer

Simulator -> Image : ~Image()
Image -> Image : cairo_destroy()
deactivate Image

deactivate Simulator
deactivate Main

@enduml

PlantUML version 1.2020.02(Sun Mar 01 07:22:07 BRT 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.28+6-post-Ubuntu-1ubuntu122.04.1
Operating System: Linux
Default Encoding: UTF-8
Language: pt
Country: BR
--></g></svg>