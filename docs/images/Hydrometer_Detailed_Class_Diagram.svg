<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1812px" preserveAspectRatio="none" style="width:1191px;height:1812px;" version="1.1" viewBox="0 0 1191 1812" width="1191px" zoomAndPan="magnify"><defs><filter height="300%" id="fr0s6o76mw8on" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="523" x="337" y="16.708">Diagrama de Classes Detalhado - Simulador de Hidrômetro</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="453" x="372" y="37.6611">Padrões: Singleton, Observer, Strategy, Composite</text><!--MD5=[0eab069cd86d617001821453947949a0]
cluster Main Application--><rect fill="#FFFFFF" filter="url(#fr0s6o76mw8on)" height="137" style="stroke: #000000; stroke-width: 1.5;" width="248" x="497" y="65.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="128" x="557" y="80.9014">Main Application</text><!--MD5=[59d733b28571a84f6d90f58fd79e43b9]
cluster Core Simulation--><rect fill="#FFFFFF" filter="url(#fr0s6o76mw8on)" height="892" style="stroke: #000000; stroke-width: 1.5;" width="288" x="270" y="251.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="124" x="352" y="266.9014">Core Simulation</text><!--MD5=[e72fdfc2e2123e5a62f7876e6249e9d6]
cluster Hydraulic System--><rect fill="#FFFFFF" filter="url(#fr0s6o76mw8on)" height="366" style="stroke: #000000; stroke-width: 1.5;" width="348" x="22" y="1207.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="136" x="128" y="1222.9014">Hydraulic System</text><!--MD5=[ef55ac058da6448d2116d25e2338149b]
cluster Visualization--><rect fill="#FFFFFF" filter="url(#fr0s6o76mw8on)" height="243" style="stroke: #000000; stroke-width: 1.5;" width="342" x="577" y="1269.4063"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="99" x="698.5" y="1284.4014">Visualization</text><!--MD5=[915f6a2b4bff9d90dc7327d570275f1b]
cluster Configuration--><rect fill="#FFFFFF" filter="url(#fr0s6o76mw8on)" height="179" style="stroke: #000000; stroke-width: 1.5;" width="794" x="291" y="1622.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="107" x="634.5" y="1637.9014">Configuration</text><!--MD5=[84718776d214be480e4c259efcb737fc]
class Main--><rect fill="#FEFECE" filter="url(#fr0s6o76mw8on)" height="86.4141" id="Main" style="stroke: #A80036; stroke-width: 1.5;" width="216" x="513" y="100.9063"/><ellipse cx="605.25" cy="116.9063" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M608.2188,122.5469 Q607.6406,122.8438 607,122.9844 Q606.3594,123.1406 605.6563,123.1406 Q603.1563,123.1406 601.8281,121.5 Q600.5156,119.8438 600.5156,116.7188 Q600.5156,113.5938 601.8281,111.9375 Q603.1563,110.2813 605.6563,110.2813 Q606.3594,110.2813 607,110.4375 Q607.6563,110.5938 608.2188,110.8906 L608.2188,113.6094 Q607.5938,113.0313 607,112.7656 Q606.4063,112.4844 605.7813,112.4844 Q604.4375,112.4844 603.75,113.5625 Q603.0625,114.625 603.0625,116.7188 Q603.0625,118.8125 603.75,119.8906 Q604.4375,120.9531 605.7813,120.9531 Q606.4063,120.9531 607,120.6875 Q607.5938,120.4063 608.2188,119.8281 L608.2188,122.5469 Z "/><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="23" x="625.75" y="120.3682">Main</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="514" x2="728" y1="132.9063" y2="132.9063"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="71" x="519" y="147.1167">+main() : int</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="514" x2="728" y1="153.7109" y2="153.7109"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="173" x="519" y="167.9214">Ponto de entrada da aplicação</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="204" x="519" y="180.7261">Gerencia ciclo de vida do simulador</text><!--MD5=[e78d3bd29d68b8fbdb4aae8710e3db25]
class Simulator--><rect fill="#FEFECE" filter="url(#fr0s6o76mw8on)" height="361.7031" id="Simulator" style="stroke: #A80036; stroke-width: 1.5;" width="233" x="309.5" y="286.9063"/><ellipse cx="398.25" cy="302.9063" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M401.2188,308.5469 Q400.6406,308.8438 400,308.9844 Q399.3594,309.1406 398.6563,309.1406 Q396.1563,309.1406 394.8281,307.5 Q393.5156,305.8438 393.5156,302.7188 Q393.5156,299.5938 394.8281,297.9375 Q396.1563,296.2813 398.6563,296.2813 Q399.3594,296.2813 400,296.4375 Q400.6563,296.5938 401.2188,296.8906 L401.2188,299.6094 Q400.5938,299.0313 400,298.7656 Q399.4063,298.4844 398.7813,298.4844 Q397.4375,298.4844 396.75,299.5625 Q396.0625,300.625 396.0625,302.7188 Q396.0625,304.8125 396.75,305.8906 Q397.4375,306.9531 398.7813,306.9531 Q399.4063,306.9531 400,306.6875 Q400.5938,306.4063 401.2188,305.8281 L401.2188,308.5469 Z "/><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="47" x="418.75" y="306.3682">Simulator</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="310.5" x2="541.5" y1="318.9063" y2="318.9063"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="139" x="315.5" y="333.1167">-running : atomic&lt;bool&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="221" x="315.5" y="345.9214">-hidrometer : unique_ptr&lt;Hidrometer&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="121" x="315.5" y="358.7261">-inputThread : thread</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="315.5" y="371.5308">-imageThread : thread</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="86" x="315.5" y="384.3354">-image : Image</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="310.5" x2="541.5" y1="390.9297" y2="390.9297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="310.5" x2="541.5" y1="392.9297" y2="392.9297"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="72" x="315.5" y="405.1401">+Simulator()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="81" x="315.5" y="417.9448">+~Simulator()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="310.5" x2="541.5" y1="424.5391" y2="424.5391"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="181" x="315.5" y="438.7495">+getHidrometer() : Hidrometer*</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="112" x="315.5" y="451.5542">+getPipeIN() : Pipe*</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="125" x="315.5" y="464.3589">+getPipeOUT() : Pipe*</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="106" x="315.5" y="477.1636">+getCounter() : int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="172" x="315.5" y="489.9683">+getHidrometerStatus() : bool</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="108" x="315.5" y="502.7729">+isRunning() : bool</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="310.5" x2="541.5" y1="509.3672" y2="509.3672"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="71" x="315.5" y="523.5776">+run() : void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="77" x="315.5" y="536.3823">+stop() : void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="138" x="315.5" y="549.187">+generateImage() : void</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="310.5" x2="541.5" y1="555.7813" y2="555.7813"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="159" x="315.5" y="569.9917">-throwFlow() : void {thread}</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="121" x="315.5" y="582.7964">-updateImage() : void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="204" x="315.5" y="595.6011">-imageUpdateLoop() : void {thread}</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="310.5" x2="541.5" y1="602.1953" y2="602.1953"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="115" x="315.5" y="616.4058">«Controller Pattern»</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="157" x="315.5" y="629.2104">Coordena toda a simulação</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="178" x="315.5" y="642.0151">Gerencia threads concorrentes</text><!--MD5=[4285a8eeb13093a62a2d8316f05da5d4]
class Hidrometer--><rect fill="#FEFECE" filter="url(#fr0s6o76mw8on)" height="387.3125" id="Hidrometer" style="stroke: #A80036; stroke-width: 1.5;" width="256" x="286" y="740.9063"/><ellipse cx="381.75" cy="756.9063" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M384.7188,762.5469 Q384.1406,762.8438 383.5,762.9844 Q382.8594,763.1406 382.1563,763.1406 Q379.6563,763.1406 378.3281,761.5 Q377.0156,759.8438 377.0156,756.7188 Q377.0156,753.5938 378.3281,751.9375 Q379.6563,750.2813 382.1563,750.2813 Q382.8594,750.2813 383.5,750.4375 Q384.1563,750.5938 384.7188,750.8906 L384.7188,753.6094 Q384.0938,753.0313 383.5,752.7656 Q382.9063,752.4844 382.2813,752.4844 Q380.9375,752.4844 380.25,753.5625 Q379.5625,754.625 379.5625,756.7188 Q379.5625,758.8125 380.25,759.8906 Q380.9375,760.9531 382.2813,760.9531 Q382.9063,760.9531 383.5,760.6875 Q384.0938,760.4063 384.7188,759.8281 L384.7188,762.5469 Z "/><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="56" x="402.25" y="760.3682">Hidrometer</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="287" x2="541" y1="772.9063" y2="772.9063"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="153" x="292" y="787.1167">-pipeIN : unique_ptr&lt;Pipe&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="166" x="292" y="799.9214">-pipeOUT : unique_ptr&lt;Pipe&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="135" x="292" y="812.7261">-update_thread : thread</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="139" x="292" y="825.5308">-running : atomic&lt;bool&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="129" x="292" y="838.3354">-counter : atomic&lt;int&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="132" x="292" y="851.1401">-status : atomic&lt;bool&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="111" x="292" y="863.9448">-counterFloat : float</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="287" x2="541" y1="870.5391" y2="870.5391"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="287" x2="541" y1="872.5391" y2="872.5391"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="215" x="292" y="884.7495">+Hidrometer(diameterIN: float = 0.1f,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="122" x="340" y="897.5542">lengthIN: float = 1.0f,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="169" x="340" y="910.3589">roughnessIN: float = 0.0001f,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="151" x="340" y="923.1636">diameterOUT: float = 0.1f,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="135" x="340" y="935.9683">lengthOUT: float = 1.0f,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="182" x="340" y="948.7729">roughnessOUT: float = 0.0001f)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="90" x="292" y="961.5776">+~Hidrometer()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="287" x2="541" y1="968.1719" y2="968.1719"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="112" x="292" y="982.3823">+getPipeIN() : Pipe*</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="125" x="292" y="995.187">+getPipeOUT() : Pipe*</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="106" x="292" y="1007.9917">+getCounter() : int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="108" x="292" y="1020.7964">+getStatus() : bool</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="287" x2="541" y1="1027.3906" y2="1027.3906"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="96" x="292" y="1041.6011">+activate() : void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="110" x="292" y="1054.4058">+deactivate() : void</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="287" x2="541" y1="1061" y2="1061"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="141" x="292" y="1075.2104">-update() : void {thread}</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="287" x2="541" y1="1081.8047" y2="1081.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="90" x="292" y="1096.0151">«Entity Pattern»</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="244" x="292" y="1108.8198">Simula comportamento real de hidrômetro</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="204" x="292" y="1121.6245">Thread-safe com atomic operations</text><!--MD5=[4dfa3bfde5407297cdf87f3e284398fb]
class Pipe--><rect fill="#FEFECE" filter="url(#fr0s6o76mw8on)" height="315.2891" id="Pipe" style="stroke: #A80036; stroke-width: 1.5;" width="315" x="38.5" y="1242.9063"/><ellipse cx="181.25" cy="1258.9063" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M184.2188,1264.5469 Q183.6406,1264.8438 183,1264.9844 Q182.3594,1265.1406 181.6563,1265.1406 Q179.1563,1265.1406 177.8281,1263.5 Q176.5156,1261.8438 176.5156,1258.7188 Q176.5156,1255.5938 177.8281,1253.9375 Q179.1563,1252.2813 181.6563,1252.2813 Q182.3594,1252.2813 183,1252.4375 Q183.6563,1252.5938 184.2188,1252.8906 L184.2188,1255.6094 Q183.5938,1255.0313 183,1254.7656 Q182.4063,1254.4844 181.7813,1254.4844 Q180.4375,1254.4844 179.75,1255.5625 Q179.0625,1256.625 179.0625,1258.7188 Q179.0625,1260.8125 179.75,1261.8906 Q180.4375,1262.9531 181.7813,1262.9531 Q182.4063,1262.9531 183,1262.6875 Q183.5938,1262.4063 184.2188,1261.8281 L184.2188,1264.5469 Z "/><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="21" x="201.75" y="1262.3682">Pipe</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="39.5" x2="352.5" y1="1274.9063" y2="1274.9063"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="89" x="44.5" y="1289.1167">-flowRate : float</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="90" x="44.5" y="1301.9214">-maxFlow : float</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="92" x="44.5" y="1314.7261">-diameter : float</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="76" x="44.5" y="1327.5308">-length : float</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="102" x="44.5" y="1340.3354">-roughness : float</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="39.5" x2="352.5" y1="1346.9297" y2="1346.9297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="39.5" x2="352.5" y1="1348.9297" y2="1348.9297"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="303" x="44.5" y="1361.1401">+Pipe(diameter: float, length: float, roughness: float)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="39.5" x2="352.5" y1="1367.7344" y2="1367.7344"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="124" x="44.5" y="1381.9448">+getDiameter() : float</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="110" x="44.5" y="1394.7495">+getLength() : float</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="135" x="44.5" y="1407.5542">+getRoughness() : float</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="122" x="44.5" y="1420.3589">+getFlowRate() : float</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="119" x="44.5" y="1433.1636">+getMaxFlow() : float</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="39.5" x2="352.5" y1="1439.7578" y2="1439.7578"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="260" x="44.5" y="1453.9683">+maxFlowForDeltaP(deltaP: double = 100000,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="118" x="120.5" y="1466.7729">rho: double = 998.0,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="135" x="120.5" y="1479.5776">mu: double = 1.002e-3,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="170" x="120.5" y="1492.3823">g: double = 9.80665) : double</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="201" x="44.5" y="1505.187">+setFlowRate(flowRate: float) : void</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="39.5" x2="352.5" y1="1511.7813" y2="1511.7813"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="90" x="44.5" y="1525.9917">«Entity Pattern»</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="212" x="44.5" y="1538.7964">Implementa equação Darcy-Weisbach</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="205" x="44.5" y="1551.6011">Calcula perdas de carga hidráulicas</text><!--MD5=[964f074a2dd77d134c21b891bb53e381]
class Image--><rect fill="#FEFECE" filter="url(#fr0s6o76mw8on)" height="192.0469" id="Image" style="stroke: #A80036; stroke-width: 1.5;" width="310" x="593" y="1304.4063"/><ellipse cx="728.25" cy="1320.4063" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M731.2188,1326.0469 Q730.6406,1326.3438 730,1326.4844 Q729.3594,1326.6406 728.6563,1326.6406 Q726.1563,1326.6406 724.8281,1325 Q723.5156,1323.3438 723.5156,1320.2188 Q723.5156,1317.0938 724.8281,1315.4375 Q726.1563,1313.7813 728.6563,1313.7813 Q729.3594,1313.7813 730,1313.9375 Q730.6563,1314.0938 731.2188,1314.3906 L731.2188,1317.1094 Q730.5938,1316.5313 730,1316.2656 Q729.4063,1315.9844 728.7813,1315.9844 Q727.4375,1315.9844 726.75,1317.0625 Q726.0625,1318.125 726.0625,1320.2188 Q726.0625,1322.3125 726.75,1323.3906 Q727.4375,1324.4531 728.7813,1324.4531 Q729.4063,1324.4531 730,1324.1875 Q730.5938,1323.9063 731.2188,1323.3281 L731.2188,1326.0469 Z "/><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="31" x="748.75" y="1323.8682">Image</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="594" x2="902" y1="1336.4063" y2="1336.4063"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="152" x="599" y="1350.6167">-surface : cairo_surface_t*</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="71" x="599" y="1363.4214">-cr : cairo_t*</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="60" x="599" y="1376.2261">-width : int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="65" x="599" y="1389.0308">-height : int</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="594" x2="902" y1="1395.625" y2="1395.625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="594" x2="902" y1="1397.625" y2="1397.625"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="245" x="599" y="1409.8354">+Image(width: int = 400, height: int = 400)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="61" x="599" y="1422.6401">+~Image()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="594" x2="902" y1="1429.2344" y2="1429.2344"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="298" x="599" y="1443.4448">+generate_image(counter: int, flowRate: float) : void</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="594" x2="902" y1="1450.0391" y2="1450.0391"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="90" x="599" y="1464.2495">«Utility Pattern»</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="171" x="599" y="1477.0542">Gera imagens PNG com Cairo</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="210" x="599" y="1489.8589">Visualização realística do hidrômetro</text><!--MD5=[8e25aa35f77dd304011564e0bef36f26]
class HidrometerConstants--><rect fill="#FEFECE" filter="url(#fr0s6o76mw8on)" height="128.4375" id="HidrometerConstants" style="stroke: #A80036; stroke-width: 1.5;" width="220" x="632" y="1657.9063"/><ellipse cx="684.75" cy="1675.7109" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M687.7188,1681.3516 Q687.1406,1681.6484 686.5,1681.7891 Q685.8594,1681.9453 685.1563,1681.9453 Q682.6563,1681.9453 681.3281,1680.3047 Q680.0156,1678.6484 680.0156,1675.5234 Q680.0156,1672.3984 681.3281,1670.7422 Q682.6563,1669.0859 685.1563,1669.0859 Q685.8594,1669.0859 686.5,1669.2422 Q687.1563,1669.3984 687.7188,1669.6953 L687.7188,1672.4141 Q687.0938,1671.8359 686.5,1671.5703 Q685.9063,1671.2891 685.2813,1671.2891 Q683.9375,1671.2891 683.25,1672.3672 Q682.5625,1673.4297 682.5625,1675.5234 Q682.5625,1677.6172 683.25,1678.6953 Q683.9375,1679.7578 685.2813,1679.7578 Q685.9063,1679.7578 686.5,1679.4922 Q687.0938,1679.2109 687.7188,1678.6328 L687.7188,1681.3516 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="48" x="734.25" y="1674.0449">«static»</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="106" x="705.25" y="1686.1572">HidrometerConstants</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="633" x2="851" y1="1693.5156" y2="1693.5156"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="157" x="638" y="1707.7261">+DIAMETER_IN : float = 0.1f</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="147" x="638" y="1720.5308">+LENGTH_IN : float = 1.0f</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="195" x="638" y="1733.3354">+ROUGHNESS_IN : float = 0.0001f</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="170" x="638" y="1746.1401">+DIAMETER_OUT : float = 0.1f</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="160" x="638" y="1758.9448">+LENGTH_OUT : float = 1.0f</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="208" x="638" y="1771.7495">+ROUGHNESS_OUT : float = 0.0001f</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="633" x2="851" y1="1778.3438" y2="1778.3438"/><!--MD5=[73ce28575ae3c66e2d85571c9cb2e557]
class PhysicsConstants--><rect fill="#FEFECE" filter="url(#fr0s6o76mw8on)" height="102.8281" id="PhysicsConstants" style="stroke: #A80036; stroke-width: 1.5;" width="290" x="307" y="1670.4063"/><ellipse cx="404.75" cy="1688.2109" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M407.7188,1693.8516 Q407.1406,1694.1484 406.5,1694.2891 Q405.8594,1694.4453 405.1563,1694.4453 Q402.6563,1694.4453 401.3281,1692.8047 Q400.0156,1691.1484 400.0156,1688.0234 Q400.0156,1684.8984 401.3281,1683.2422 Q402.6563,1681.5859 405.1563,1681.5859 Q405.8594,1681.5859 406.5,1681.7422 Q407.1563,1681.8984 407.7188,1682.1953 L407.7188,1684.9141 Q407.0938,1684.3359 406.5,1684.0703 Q405.9063,1683.7891 405.2813,1683.7891 Q403.9375,1683.7891 403.25,1684.8672 Q402.5625,1685.9297 402.5625,1688.0234 Q402.5625,1690.1172 403.25,1691.1953 Q403.9375,1692.2578 405.2813,1692.2578 Q405.9063,1692.2578 406.5,1691.9922 Q407.0938,1691.7109 407.7188,1691.1328 L407.7188,1693.8516 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="48" x="444.25" y="1686.5449">«static»</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="86" x="425.25" y="1698.6572">PhysicsConstants</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="308" x2="596" y1="1706.0156" y2="1706.0156"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="252" x="313" y="1720.2261">+M_PI : double = 3.14159265358979323846</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="278" x="313" y="1733.0308">+RHO : double = 998.0 {Densidade água kg/m³}</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="258" x="313" y="1745.8354">+MU : double = 1.002e-3 {Viscosidade Pa·s}</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="237" x="313" y="1758.6401">+G : double = 9.80665 {Gravidade m/s²}</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="308" x2="596" y1="1765.2344" y2="1765.2344"/><!--MD5=[601ae1f9e1accb4dfc40e8eab6c34cd3]
class ImageConstants--><rect fill="#FEFECE" filter="url(#fr0s6o76mw8on)" height="77.2188" id="ImageConstants" style="stroke: #A80036; stroke-width: 1.5;" width="182" x="887" y="1683.4063"/><ellipse cx="933.25" cy="1701.2109" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M936.2188,1706.8516 Q935.6406,1707.1484 935,1707.2891 Q934.3594,1707.4453 933.6563,1707.4453 Q931.1563,1707.4453 929.8281,1705.8047 Q928.5156,1704.1484 928.5156,1701.0234 Q928.5156,1697.8984 929.8281,1696.2422 Q931.1563,1694.5859 933.6563,1694.5859 Q934.3594,1694.5859 935,1694.7422 Q935.6563,1694.8984 936.2188,1695.1953 L936.2188,1697.9141 Q935.5938,1697.3359 935,1697.0703 Q934.4063,1696.7891 933.7813,1696.7891 Q932.4375,1696.7891 931.75,1697.8672 Q931.0625,1698.9297 931.0625,1701.0234 Q931.0625,1703.1172 931.75,1704.1953 Q932.4375,1705.2578 933.7813,1705.2578 Q934.4063,1705.2578 935,1704.9922 Q935.5938,1704.7109 936.2188,1704.1328 L936.2188,1706.8516 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="48" x="970.25" y="1699.5449">«static»</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="81" x="953.75" y="1711.6572">ImageConstants</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="888" x2="1068" y1="1719.0156" y2="1719.0156"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="163" x="893" y="1733.2261">+DEFAULT_WIDTH : int = 400</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="170" x="893" y="1746.0308">+DEFAULT_HEIGHT : int = 400</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="888" x2="1068" y1="1752.625" y2="1752.625"/><path d="M204.5,100.9063 L204.5,186.5703 A0,0 0 0 0 204.5,186.5703 L348.11,186.5703 L378.4,286.6063 L356.11,186.5703 L477.5,186.5703 A0,0 0 0 0 477.5,186.5703 L477.5,110.9063 L467.5,100.9063 L204.5,100.9063 A0,0 0 0 0 204.5,100.9063 " fill="#FBFB77" filter="url(#fr0s6o76mw8on)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M467.5,100.9063 L467.5,110.9063 L477.5,110.9063 L467.5,100.9063 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="192" x="210.5" y="117.9731">Multi-Threading Controller</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="179" x="210.5" y="133.106">• Main thread: coordenação</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="190" x="210.5" y="148.2388">• InputThread: geração vazão</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="217" x="210.5" y="163.3716">• ImageThread: atualização visual</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="252" x="210.5" y="178.5044">• Atomic operations para thread-safety</text><path d="M577.5,891.4063 L577.5,930.4063 L542.44,934.4063 L577.5,938.4063 L577.5,977.0703 A0,0 0 0 0 577.5,977.0703 L752.5,977.0703 A0,0 0 0 0 752.5,977.0703 L752.5,901.4063 L742.5,891.4063 L577.5,891.4063 A0,0 0 0 0 577.5,891.4063 " fill="#FBFB77" filter="url(#fr0s6o76mw8on)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M742.5,891.4063 L742.5,901.4063 L752.5,901.4063 L742.5,891.4063 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="136" x="583.5" y="908.4731">Thread-Safe Entity</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="583.5" y="923.606">• Update thread própria</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="583.5" y="938.7388">• Atomic counters</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="583.5" y="953.8716">• Simulação tempo real</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="583.5" y="969.0044">• Perda de carga 10%</text><path d="M66.5,1678.9063 L66.5,1764.5703 A0,0 0 0 0 66.5,1764.5703 L271.5,1764.5703 A0,0 0 0 0 271.5,1764.5703 L271.5,1688.9063 L261.5,1678.9063 L176.58,1678.9063 L182.74,1558.3463 L168.58,1678.9063 L66.5,1678.9063 A0,0 0 0 0 66.5,1678.9063 " fill="#FBFB77" filter="url(#fr0s6o76mw8on)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M261.5,1678.9063 L261.5,1688.9063 L271.5,1688.9063 L261.5,1678.9063 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="137" x="72.5" y="1695.9731">Physics Simulation</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="173" x="72.5" y="1711.106">• Equação Darcy-Weisbach</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182" x="72.5" y="1726.2388">• Regime turbulento/laminar</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="72.5" y="1741.3716">• Convergência iterativa</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="72.5" y="1756.5044">• Perdas de carga realísticas</text><path d="M1009,1357.4063 L1009,1396.4063 L903.09,1400.4063 L1009,1404.4063 L1009,1443.0703 A0,0 0 0 0 1009,1443.0703 L1179,1443.0703 A0,0 0 0 0 1179,1443.0703 L1179,1367.4063 L1169,1357.4063 L1009,1357.4063 A0,0 0 0 0 1009,1357.4063 " fill="#FBFB77" filter="url(#fr0s6o76mw8on)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1169,1357.4063 L1169,1367.4063 L1179,1367.4063 L1169,1357.4063 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="1015" y="1374.4731">Cairo Graphics</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="1015" y="1389.606">• Renderização vetorial</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="1015" y="1404.7388">• PNG output</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="1015" y="1419.8716">• Visual realístico</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="1015" y="1435.0044">• Atualização dinâmica</text><path d="M764,100.9063 L764,186.5703 L1128,186.5703 L1128,110.9063 L1118,100.9063 L764,100.9063 " fill="#FBFB77" filter="url(#fr0s6o76mw8on)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1118,100.9063 L1118,110.9063 L1128,110.9063 L1118,100.9063 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="186" x="770" y="117.9731">Padrões Implementados:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="770" y="133.106">•</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="79" x="782" y="133.106">Composite</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="861" y="133.106">: Hidrometer + 2 Pipes</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="770" y="148.2388">•</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="782" y="148.2388">Strategy</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="845" y="148.2388">: Diferentes cálculos hidráulicos</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="770" y="163.3716">•</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67" x="782" y="163.3716">Observer</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="198" x="849" y="163.3716">: Threads observam mudanças</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="770" y="178.5044">•</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="170" x="782" y="178.5044">Resource Management</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="952" y="178.5044">: RAII com smart pointers</text><!--MD5=[1506b1e4c800484870c4753578afeffe]
link Main to Simulator--><path d="M595.51,187.0062 C580.18,212.3163 559.49,246.4762 537.83,282.2362 " fill="none" id="Main-&gt;Simulator" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="535.19,286.6063,543.2643,280.9665,537.773,282.3251,536.4144,276.8338,535.19,286.6063" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="127" x="574" y="231.9731">creates &amp; manages</text><!--MD5=[afe401bdb76e54f99d631d5d37bdf810]
reverse link Simulator to Hidrometer--><path d="M421.01,662.2163 C420.34,688.1163 419.65,714.6763 418.98,740.5663 " fill="none" id="Simulator&lt;-Hidrometer" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="421.34,649.1563,417.1832,655.0487,421.0236,661.1521,425.1804,655.2596,421.34,649.1563" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="421" y="691.9731">composition</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="24" x="448" y="707.106">1..1</text><!--MD5=[7414a9462ccd3652c86654364f452892]
reverse link Simulator to Image--><path d="M554.12,531.8963 C632.18,577.9563 725.26,648.4862 770,740.9063 C858.72,924.1663 813.43,1170.9363 777.59,1304.3063 " fill="none" id="Simulator&lt;-Image" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="542.72,525.2762,545.9061,531.7453,553.103,531.2923,549.9169,524.8233,542.72,525.2762" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="822" y="931.4731">composition</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="24" x="849" y="946.606">1..1</text><!--MD5=[ca4bd7dbc188d05c213b640a8d1422a3]
reverse link Hidrometer to Pipe--><path d="M317.74,1140.2863 C301.57,1174.7163 285.02,1209.9463 269.53,1242.8963 " fill="none" id="Hidrometer&lt;-Pipe" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="323.44,1128.1563,317.267,1131.8838,318.3336,1139.0156,324.5066,1135.288,323.44,1128.1563" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="306" y="1172.9731">composition</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="24" x="333" y="1188.106">1..2</text><!--MD5=[de197d393e5e24c9dd953226f05d3ad8]
link Simulator to HidrometerConstants--><path d="M542.74,498.4063 C658.32,534.4563 829.24,607.7963 909,740.9063 C1005.07,901.2263 1006.8,1416.9163 919,1581.9063 C906.67,1605.0863 891.03,1599.1763 870,1614.9063 C853.49,1627.2563 836.23,1640.9663 819.92,1654.3163 " fill="none" id="Simulator-&gt;HidrometerConstants" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="815.79,1657.7063,825.287,1655.0972,819.6579,1654.5377,820.2174,1648.9086,815.79,1657.7063" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="984" y="1180.4731">uses</text><!--MD5=[fc49b72059a8d3d0fe56ee38136a86e9]
link Hidrometer to HidrometerConstants--><path d="M468.26,1128.0462 C474.3,1152.1463 480.04,1176.5363 485,1199.9063 C520.66,1368.0263 441.95,1444.3663 545,1581.9063 C565.62,1609.4363 586.01,1596.4063 615,1614.9063 C633.19,1626.5163 651.64,1640.4363 668.63,1654.3163 " fill="none" id="Hidrometer-&gt;HidrometerConstants" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="672.92,1657.8463,668.4926,1649.0486,669.0521,1654.6777,663.423,1655.2372,672.92,1657.8463" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="546" y="1404.9731">uses</text><!--MD5=[843cf2f85da4c437f710b7bb4959cf6d]
link Hidrometer to PhysicsConstants--><path d="M423.32,1128.0662 C431.86,1304.6763 443.97,1554.9563 449.3,1665.1463 " fill="none" id="Hidrometer-&gt;PhysicsConstants" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="449.55,1670.2863,453.1087,1661.1028,449.3074,1665.2921,445.1181,1661.4909,449.55,1670.2863" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="446" y="1404.9731">uses</text><!--MD5=[e5404bfbf0bbeaa6b4059bcad889deb0]
link Pipe to PhysicsConstants--><path d="M321.75,1558.3463 C352.85,1597.1663 384.13,1636.1963 408.24,1666.2863 " fill="none" id="Pipe-&gt;PhysicsConstants" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="411.44,1670.2863,408.9285,1660.763,408.3113,1666.3861,402.6882,1665.7689,411.44,1670.2863" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="356" y="1602.9731">uses</text><!--MD5=[64a7ce64c80f7a65b490cc6db32db895]
link Image to ImageConstants--><path d="M816.7,1496.8363 C860.38,1557.5163 914.77,1633.0763 947.91,1679.1163 " fill="none" id="Image-&gt;ImageConstants" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="950.86,1683.1963,948.8519,1673.5543,947.9404,1679.1372,942.3574,1678.2257,950.86,1683.1963" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="891" y="1602.9731">uses</text><!--MD5=[90c85a8a5542ac1d983cb554d998b9cc]
@startuml Hydrometer_Detailed_Class_Diagram


title Diagrama de Classes Detalhado - Simulador de Hidrômetro\nPadrões: Singleton, Observer, Strategy, Composite

skinparam classAttributeIconSize 0
skinparam classFontSize 10
skinparam packageStyle rectangle

package "Main Application" {
    class Main {
        {static} + main() : int
        - -
        Ponto de entrada da aplicação
        Gerencia ciclo de vida do simulador
    }
}

package "Core Simulation" {
    class Simulator {
        - running : atomic<bool>
        - hidrometer : unique_ptr<Hidrometer>
        - inputThread : thread
        - imageThread : thread  
        - image : Image
        ==
        + Simulator()
        + ~Simulator()
        - -
        + getHidrometer() : Hidrometer*
        + getPipeIN() : Pipe*
        + getPipeOUT() : Pipe* 
        + getCounter() : int
        + getHidrometerStatus() : bool
        + isRunning() : bool
        - -
        + run() : void
        + stop() : void
        + generateImage() : void
        - -
        - throwFlow() : void {thread}
        - updateImage() : void
        - imageUpdateLoop() : void {thread}
        - -
        <<Controller Pattern>>
        Coordena toda a simulação
        Gerencia threads concorrentes
    }

    class Hidrometer {
        - pipeIN : unique_ptr<Pipe>
        - pipeOUT : unique_ptr<Pipe>
        - update_thread : thread
        - running : atomic<bool>
        - counter : atomic<int>
        - status : atomic<bool>
        - counterFloat : float
        ==
        + Hidrometer(diameterIN: float = 0.1f,\n            lengthIN: float = 1.0f,\n            roughnessIN: float = 0.0001f,\n            diameterOUT: float = 0.1f,\n            lengthOUT: float = 1.0f,\n            roughnessOUT: float = 0.0001f)
        + ~Hidrometer()
        - -
        + getPipeIN() : Pipe*
        + getPipeOUT() : Pipe*
        + getCounter() : int
        + getStatus() : bool
        - -
        + activate() : void
        + deactivate() : void
        - -
        - update() : void {thread}
        - -
        <<Entity Pattern>>
        Simula comportamento real de hidrômetro
        Thread-safe com atomic operations
    }
}

package "Hydraulic System" {
    class Pipe {
        - flowRate : float
        - maxFlow : float
        - diameter : float
        - length : float  
        - roughness : float
        ==
        + Pipe(diameter: float, length: float, roughness: float)
        - -
        + getDiameter() : float
        + getLength() : float
        + getRoughness() : float
        + getFlowRate() : float
        + getMaxFlow() : float
        - -
        + maxFlowForDeltaP(deltaP: double = 100000,\n                   rho: double = 998.0,\n                   mu: double = 1.002e-3,\n                   g: double = 9.80665) : double
        + setFlowRate(flowRate: float) : void
        - -
        <<Entity Pattern>>
        Implementa equação Darcy-Weisbach
        Calcula perdas de carga hidráulicas
    }
}

package "Visualization" {
    class Image {
        - surface : cairo_surface_t*
        - cr : cairo_t*
        - width : int
        - height : int
        ==
        + Image(width: int = 400, height: int = 400)
        + ~Image()
        - -
        + generate_image(counter: int, flowRate: float) : void
        - -
        <<Utility Pattern>>
        Gera imagens PNG com Cairo
        Visualização realística do hidrômetro
    }
}

package "Configuration" {
    class HidrometerConstants <<static>> {
        {static} + DIAMETER_IN : float = 0.1f
        {static} + LENGTH_IN : float = 1.0f
        {static} + ROUGHNESS_IN : float = 0.0001f
        {static} + DIAMETER_OUT : float = 0.1f
        {static} + LENGTH_OUT : float = 1.0f
        {static} + ROUGHNESS_OUT : float = 0.0001f
    }
    
    class PhysicsConstants <<static>> {
        {static} + M_PI : double = 3.14159265358979323846
        {static} + RHO : double = 998.0 {Densidade água kg/m³}
        {static} + MU : double = 1.002e-3 {Viscosidade Pa·s}
        {static} + G : double = 9.80665 {Gravidade m/s²}
    }
    
    class ImageConstants <<static>> {
        {static} + DEFAULT_WIDTH : int = 400
        {static} + DEFAULT_HEIGHT : int = 400
    }
}

Main - -> Simulator : "creates & manages"
Simulator *- - Hidrometer : "composition\n1..1"
Simulator *- - Image : "composition\n1..1"
Hidrometer *- - Pipe : "composition\n1..2"

Simulator ..> HidrometerConstants : "uses"
Hidrometer ..> HidrometerConstants : "uses"
Hidrometer ..> PhysicsConstants : "uses"
Pipe ..> PhysicsConstants : "uses"
Image ..> ImageConstants : "uses"

note top of Simulator : **Multi-Threading Controller**\n• Main thread: coordenação\n• InputThread: geração vazão\n• ImageThread: atualização visual\n• Atomic operations para thread-safety

note right of Hidrometer : **Thread-Safe Entity**\n• Update thread própria\n• Atomic counters\n• Simulação tempo real\n• Perda de carga 10%

note bottom of Pipe : **Physics Simulation**\n• Equação Darcy-Weisbach\n• Regime turbulento/laminar\n• Convergência iterativa\n• Perdas de carga realísticas

note left of Image : **Cairo Graphics**\n• Renderização vetorial\n• PNG output\n• Visual realístico\n• Atualização dinâmica

note as N1
    **Padrões Implementados:**
    • **Composite**: Hidrometer + 2 Pipes
    • **Strategy**: Diferentes cálculos hidráulicos
    • **Observer**: Threads observam mudanças
    • **Resource Management**: RAII com smart pointers
end note

@enduml

PlantUML version 1.2020.02(Sun Mar 01 07:22:07 BRT 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.28+6-post-Ubuntu-1ubuntu122.04.1
Operating System: Linux
Default Encoding: UTF-8
Language: pt
Country: BR
--></g></svg>