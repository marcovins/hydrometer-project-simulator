<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1812px" preserveAspectRatio="none" style="width:1003px;height:1812px;background:#FAFAFA;" version="1.1" viewBox="0 0 1003 1812" width="1003px" zoomAndPan="magnify"><defs><filter height="300%" id="f1p1oqbnzloma3" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="454" x="270" y="26.708">Diagrama de Sequência - Simulação de Hidrômetro</text><rect fill="#FFFFFF" filter="url(#f1p1oqbnzloma3)" height="969.3906" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="383" y="450.5781"/><rect fill="#FAFAFA" filter="url(#f1p1oqbnzloma3)" height="217.9297" style="stroke: #000000; stroke-width: 2.0;" width="509" x="337" y="513.7109"/><rect fill="#FAFAFA" filter="url(#f1p1oqbnzloma3)" height="273.0625" style="stroke: #000000; stroke-width: 2.0;" width="644" x="337" y="788.7734"/><rect fill="#FAFAFA" filter="url(#f1p1oqbnzloma3)" height="250.8672" style="stroke: #000000; stroke-width: 2.0;" width="506" x="13" y="1118.9688"/><rect fill="#FAFAFA" filter="url(#f1p1oqbnzloma3)" height="190.6016" style="stroke: #000000; stroke-width: 2.0;" width="486" x="23" y="1172.2344"/><rect fill="#FAFAFA" height="102.2031" style="stroke: none; stroke-width: 1.0;" width="486" x="23" y="1260.6328"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="62" x2="62" y1="121.25" y2="1725.5625"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="218" x2="218" y1="121.25" y2="1725.5625"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="388" x2="388" y1="121.25" y2="1725.5625"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="540.5" x2="540.5" y1="121.25" y2="1725.5625"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="680.5" x2="680.5" y1="121.25" y2="1725.5625"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="797" x2="797" y1="121.25" y2="1725.5625"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="876" x2="876" y1="121.25" y2="1725.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52" x="33" y="117.9482">Usuario</text><ellipse cx="62" cy="47.9531" fill="#FFE6E6" filter="url(#f1p1oqbnzloma3)" rx="8" ry="8" style="stroke: #333333; stroke-width: 2.0;"/><path d="M62,55.9531 L62,82.9531 M49,63.9531 L75,63.9531 M62,82.9531 L49,97.9531 M62,82.9531 L75,97.9531 " fill="none" filter="url(#f1p1oqbnzloma3)" style="stroke: #333333; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52" x="33" y="1737.5576">Usuario</text><ellipse cx="62" cy="1750.8594" fill="#FFE6E6" filter="url(#f1p1oqbnzloma3)" rx="8" ry="8" style="stroke: #333333; stroke-width: 2.0;"/><path d="M62,1758.8594 L62,1785.8594 M49,1766.8594 L75,1766.8594 M62,1785.8594 L49,1800.8594 M62,1785.8594 L75,1800.8594 " fill="none" filter="url(#f1p1oqbnzloma3)" style="stroke: #333333; stroke-width: 2.0;"/><rect fill="#E6F2FF" filter="url(#f1p1oqbnzloma3)" height="30.2969" style="stroke: #333333; stroke-width: 1.5;" width="46" x="193" y="85.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="200" y="105.9482">Main</text><rect fill="#E6F2FF" filter="url(#f1p1oqbnzloma3)" height="30.2969" style="stroke: #333333; stroke-width: 1.5;" width="46" x="193" y="1724.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="200" y="1744.5576">Main</text><rect fill="#E6F2FF" filter="url(#f1p1oqbnzloma3)" height="30.2969" style="stroke: #333333; stroke-width: 1.5;" width="78" x="347" y="85.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64" x="354" y="105.9482">Simulator</text><rect fill="#E6F2FF" filter="url(#f1p1oqbnzloma3)" height="30.2969" style="stroke: #333333; stroke-width: 1.5;" width="78" x="347" y="1724.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64" x="354" y="1744.5576">Simulator</text><rect fill="#E6F2FF" filter="url(#f1p1oqbnzloma3)" height="30.2969" style="stroke: #333333; stroke-width: 1.5;" width="91" x="493.5" y="85.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="77" x="500.5" y="105.9482">Hidrometer</text><rect fill="#E6F2FF" filter="url(#f1p1oqbnzloma3)" height="30.2969" style="stroke: #333333; stroke-width: 1.5;" width="91" x="493.5" y="1724.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="77" x="500.5" y="1744.5576">Hidrometer</text><rect fill="#E6F2FF" filter="url(#f1p1oqbnzloma3)" height="30.2969" style="stroke: #333333; stroke-width: 1.5;" width="57" x="650.5" y="85.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="657.5" y="105.9482">PipeIN</text><rect fill="#E6F2FF" filter="url(#f1p1oqbnzloma3)" height="30.2969" style="stroke: #333333; stroke-width: 1.5;" width="57" x="650.5" y="1724.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="657.5" y="1744.5576">PipeIN</text><rect fill="#E6F2FF" filter="url(#f1p1oqbnzloma3)" height="30.2969" style="stroke: #333333; stroke-width: 1.5;" width="74" x="758" y="85.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="60" x="765" y="105.9482">PipeOUT</text><rect fill="#E6F2FF" filter="url(#f1p1oqbnzloma3)" height="30.2969" style="stroke: #333333; stroke-width: 1.5;" width="74" x="758" y="1724.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="60" x="765" y="1744.5576">PipeOUT</text><rect fill="#E6F2FF" filter="url(#f1p1oqbnzloma3)" height="30.2969" style="stroke: #333333; stroke-width: 1.5;" width="56" x="846" y="85.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="853" y="105.9482">Image</text><rect fill="#E6F2FF" filter="url(#f1p1oqbnzloma3)" height="30.2969" style="stroke: #333333; stroke-width: 1.5;" width="56" x="846" y="1724.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="853" y="1744.5576">Image</text><rect fill="#FFFFFF" filter="url(#f1p1oqbnzloma3)" height="969.3906" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="383" y="450.5781"/><rect fill="#EEEEEE" filter="url(#f1p1oqbnzloma3)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="988" x="3" y="151.8164"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="991" y1="151.8164" y2="151.8164"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="991" y1="154.8164" y2="154.8164"/><rect fill="#EEEEEE" filter="url(#f1p1oqbnzloma3)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="108" x="443" y="141.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="89" x="449" y="157.3169">Inicialização</text><polygon fill="#A80036" points="206,191.5156,216,195.5156,206,199.5156,210,195.5156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="62" x2="212" y1="195.5156" y2="195.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="81" y="190.4497">Executa programa</text><polygon fill="#A80036" points="376,220.6484,386,224.6484,376,228.6484,380,224.6484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="218" x2="382" y1="224.6484" y2="224.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="252.5" y="219.5825">new Simulator()</text><polygon fill="#A80036" points="529,249.7813,539,253.7813,529,257.7813,533,253.7813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="388" x2="535" y1="253.7813" y2="253.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="408.5" y="248.7153">new Hidrometer()</text><polygon fill="#A80036" points="864,278.9141,874,282.9141,864,286.9141,868,282.9141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="388" x2="870" y1="282.9141" y2="282.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="592.5" y="277.8481">new Image()</text><polygon fill="#A80036" points="669,308.0469,679,312.0469,669,316.0469,673,312.0469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="541" x2="675" y1="312.0469" y2="312.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="553" y="306.981">new Pipe(entrada)</text><polygon fill="#A80036" points="785,337.1797,795,341.1797,785,345.1797,789,341.1797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="541" x2="791" y1="341.1797" y2="341.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="619" y="336.1138">new Pipe(saída)</text><rect fill="#EEEEEE" filter="url(#f1p1oqbnzloma3)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="988" x="3" y="369.7461"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="991" y1="369.7461" y2="369.7461"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="991" y1="372.7461" y2="372.7461"/><rect fill="#EEEEEE" filter="url(#f1p1oqbnzloma3)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="82" x="456" y="359.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="462" y="375.2466">Ativação</text><polygon fill="#A80036" points="376,409.4453,386,413.4453,376,417.4453,380,413.4453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="218" x2="382" y1="413.4453" y2="413.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="287.5" y="408.3794">run()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="388" x2="435" y1="437.5781" y2="437.5781"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="435" x2="435" y1="437.5781" y2="450.5781"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="394" x2="435" y1="450.5781" y2="450.5781"/><polygon fill="#A80036" points="404,446.5781,394,450.5781,404,454.5781,400,450.5781" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="400" y="432.5122">criar threads</text><rect fill="#EEEEEE" filter="url(#f1p1oqbnzloma3)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="988" x="3" y="484.1445"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="991" y1="484.1445" y2="484.1445"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="991" y1="487.1445" y2="487.1445"/><rect fill="#EEEEEE" filter="url(#f1p1oqbnzloma3)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="144" x="425" y="473.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="125" x="431" y="489.645">Thread de Vazão</text><path d="M337,513.7109 L414,513.7109 L414,520.7109 L404,530.7109 L337,530.7109 L337,513.7109 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="217.9297" style="stroke: #000000; stroke-width: 2.0;" width="509" x="337" y="513.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="352" y="526.7778">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="112" x="429" y="525.9214">[Simulação ativa]</text><polygon fill="#A80036" points="669,547.9766,679,551.9766,669,555.9766,673,551.9766" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="393" x2="675" y1="551.9766" y2="551.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="470" y="546.9106">calculateFlow(deltaP)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="681" x2="723" y1="581.1094" y2="581.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="723" x2="723" y1="581.1094" y2="594.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="682" x2="723" y1="594.1094" y2="594.1094"/><polygon fill="#A80036" points="692,590.1094,682,594.1094,692,598.1094,688,594.1094" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="688" y="576.0435">Darcy-Weisbach</text><polygon fill="#A80036" points="404,619.2422,394,623.2422,404,627.2422,400,623.2422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="398" x2="680" y1="623.2422" y2="623.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="486" y="618.1763">vazão calculada</text><polygon fill="#A80036" points="529,648.375,539,652.375,529,656.375,533,652.375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="393" x2="535" y1="652.375" y2="652.375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="405" y="647.3091">setFlowRate(vazão)</text><polygon fill="#A80036" points="785,677.5078,795,681.5078,785,685.5078,789,681.5078" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="541" x2="791" y1="681.5078" y2="681.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="82" x="628" y="676.4419">updateFlow()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="393" x2="435" y1="710.6406" y2="710.6406"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="435" x2="435" y1="710.6406" y2="723.6406"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="394" x2="435" y1="723.6406" y2="723.6406"/><polygon fill="#A80036" points="404,719.6406,394,723.6406,404,727.6406,400,723.6406" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="400" y="705.5747">sleep(100ms)</text><rect fill="#EEEEEE" filter="url(#f1p1oqbnzloma3)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="988" x="3" y="759.207"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="991" y1="759.207" y2="759.207"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="991" y1="762.207" y2="762.207"/><rect fill="#EEEEEE" filter="url(#f1p1oqbnzloma3)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="159" x="417.5" y="748.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="140" x="423.5" y="764.7075">Thread de Imagem</text><path d="M337,788.7734 L414,788.7734 L414,795.7734 L404,805.7734 L337,805.7734 L337,788.7734 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="273.0625" style="stroke: #000000; stroke-width: 2.0;" width="644" x="337" y="788.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="352" y="801.8403">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="81" x="429" y="800.9839">[A cada 1m³]</text><polygon fill="#A80036" points="864,823.0391,874,827.0391,864,831.0391,868,827.0391" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="393" x2="870" y1="827.0391" y2="827.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="181" x="544" y="821.9731">generateHidrometerImage()</text><polygon fill="#A80036" points="552,852.1719,542,856.1719,552,860.1719,548,856.1719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="546" x2="875" y1="856.1719" y2="856.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="668.5" y="851.106">getVolume()</text><polygon fill="#A80036" points="552,881.3047,542,885.3047,552,889.3047,548,885.3047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="546" x2="875" y1="885.3047" y2="885.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="665" y="880.2388">getFlowRate()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="876" x2="918" y1="914.4375" y2="914.4375"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="918" x2="918" y1="914.4375" y2="927.4375"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="877" x2="918" y1="927.4375" y2="927.4375"/><polygon fill="#A80036" points="887,923.4375,877,927.4375,887,931.4375,883,927.4375" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="883" y="909.3716">drawPointer()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="876" x2="918" y1="956.5703" y2="956.5703"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="918" x2="918" y1="956.5703" y2="969.5703"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="877" x2="918" y1="969.5703" y2="969.5703"/><polygon fill="#A80036" points="887,965.5703,877,969.5703,887,973.5703,883,969.5703" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="883" y="951.5044">drawDisplay()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="876" x2="918" y1="998.7031" y2="998.7031"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="918" x2="918" y1="998.7031" y2="1011.7031"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="877" x2="918" y1="1011.7031" y2="1011.7031"/><polygon fill="#A80036" points="887,1007.7031,877,1011.7031,887,1015.7031,883,1011.7031" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="883" y="993.6372">saveImage()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="393" x2="435" y1="1040.8359" y2="1040.8359"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="435" x2="435" y1="1040.8359" y2="1053.8359"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="394" x2="435" y1="1053.8359" y2="1053.8359"/><polygon fill="#A80036" points="404,1049.8359,394,1053.8359,404,1057.8359,400,1053.8359" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="400" y="1035.77">sleep(500ms)</text><rect fill="#EEEEEE" filter="url(#f1p1oqbnzloma3)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="988" x="3" y="1089.4023"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="991" y1="1089.4023" y2="1089.4023"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="991" y1="1092.4023" y2="1092.4023"/><rect fill="#EEEEEE" filter="url(#f1p1oqbnzloma3)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="139" x="427.5" y="1078.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="120" x="433.5" y="1094.9028">Thread Principal</text><path d="M13,1118.9688 L90,1118.9688 L90,1125.9688 L80,1135.9688 L13,1135.9688 L13,1118.9688 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="250.8672" style="stroke: #000000; stroke-width: 2.0;" width="506" x="13" y="1118.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="28" y="1132.0356">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="107" x="105" y="1131.1792">[Monitoramento]</text><polygon fill="#A80036" points="206,1153.2344,216,1157.2344,206,1161.2344,210,1157.2344" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="62" x2="212" y1="1157.2344" y2="1157.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="91.5" y="1152.1685">pressiona tecla</text><path d="M23,1172.2344 L87,1172.2344 L87,1179.2344 L77,1189.2344 L23,1189.2344 L23,1172.2344 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="190.6016" style="stroke: #000000; stroke-width: 2.0;" width="486" x="23" y="1172.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="38" y="1185.3013">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="102" y="1184.4448">[tecla == 'q']</text><polygon fill="#A80036" points="371,1206.5,381,1210.5,371,1214.5,375,1210.5" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="218" x2="377" y1="1210.5" y2="1210.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="38" x="281.5" y="1205.4341">stop()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="393" x2="435" y1="1239.6328" y2="1239.6328"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="435" x2="435" y1="1239.6328" y2="1252.6328"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="394" x2="435" y1="1252.6328" y2="1252.6328"/><polygon fill="#A80036" points="404,1248.6328,394,1252.6328,404,1256.6328,400,1252.6328" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="400" y="1234.5669">running = false</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="23" x2="509" y1="1261.6328" y2="1261.6328"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="81" x="28" y="1271.8433">[tecla == 's']</text><polygon fill="#A80036" points="371,1292.5703,381,1296.5703,371,1300.5703,375,1296.5703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="218" x2="377" y1="1296.5703" y2="1296.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="73" x="264" y="1291.5044">getStatus()</text><polygon fill="#A80036" points="229,1321.7031,219,1325.7031,229,1329.7031,225,1325.7031" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="223" x2="382" y1="1325.7031" y2="1325.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="230" y="1320.6372">volume, vazão, status</text><polygon fill="#A80036" points="73,1350.8359,63,1354.8359,73,1358.8359,69,1354.8359" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="67" x2="217" y1="1354.8359" y2="1354.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="81.5" y="1349.77">exibe informações</text><rect fill="#EEEEEE" filter="url(#f1p1oqbnzloma3)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="988" x="3" y="1397.4023"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="991" y1="1397.4023" y2="1397.4023"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="991" y1="1400.4023" y2="1400.4023"/><rect fill="#EEEEEE" filter="url(#f1p1oqbnzloma3)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="101" x="446.5" y="1386.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="452.5" y="1402.9028">Finalização</text><polygon fill="#A80036" points="529,1437.1016,539,1441.1016,529,1445.1016,533,1441.1016" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="388" x2="535" y1="1441.1016" y2="1441.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="431.5" y="1436.0356">destructor</text><polygon fill="#A80036" points="864,1466.2344,874,1470.2344,864,1474.2344,868,1470.2344" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="388" x2="870" y1="1470.2344" y2="1470.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="599" y="1465.1685">destructor</text><polygon fill="#A80036" points="73,1495.3672,63,1499.3672,73,1503.3672,69,1499.3672" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="67" x2="217" y1="1499.3672" y2="1499.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="74" y="1494.3013">Programa encerrado</text><path d="M292,1512.3672 L292,1567.3672 L480,1567.3672 L480,1522.3672 L470,1512.3672 L292,1512.3672 " fill="#FBFB77" filter="url(#f1p1oqbnzloma3)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M470,1512.3672 L470,1522.3672 L480,1522.3672 L470,1512.3672 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="298" y="1529.4341">Padrão Observer</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="298" y="1544.5669">Threads observam estado</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="298" y="1559.6997">atomicamente</text><path d="M431,1581.7656 L431,1636.7656 L647,1636.7656 L647,1591.7656 L637,1581.7656 L431,1581.7656 " fill="#FBFB77" filter="url(#f1p1oqbnzloma3)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M637,1581.7656 L637,1591.7656 L647,1591.7656 L637,1581.7656 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="437" y="1598.8325">Thread Safety</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="437" y="1613.9653">atomic&lt;bool&gt;, atomic&lt;float&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="437" y="1629.0981">para sincronização</text><path d="M626,1651.1641 L626,1706.1641 L847,1706.1641 L847,1661.1641 L837,1651.1641 L626,1651.1641 " fill="#FBFB77" filter="url(#f1p1oqbnzloma3)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M837,1651.1641 L837,1661.1641 L847,1661.1641 L837,1651.1641 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="632" y="1668.231">Strategy Pattern</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="632" y="1683.3638">Diferentes estratégias</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="632" y="1698.4966">para regime laminar/turbulento</text><!--MD5=[f4cce3a0d7f94329db97ac78e2e07b30]
@startuml Sequence_Diagram

title Diagrama de Sequência - Simulação de Hidrômetro

skinparam sequenceMessageAlign center
skinparam backgroundColor #FAFAFA
skinparam participantBackgroundColor #E6F2FF
skinparam participantBorderColor #333333
skinparam actorBackgroundColor #FFE6E6
skinparam actorBorderColor #333333

actor Usuario as U
participant Main as M
participant Simulator as S
participant Hidrometer as H
participant PipeIN as PI
participant PipeOUT as PO
participant Image as I

== Inicialização ==
U -> M : Executa programa
M -> S : new Simulator()
S -> H : new Hidrometer()
S -> I : new Image()
H -> PI : new Pipe(entrada)
H -> PO : new Pipe(saída)

== Ativação ==
M -> S : run()
S -> S : criar threads
activate S

== Thread de Vazão ==
loop Simulação ativa
    S -> PI : calculateFlow(deltaP)
    PI -> PI : Darcy-Weisbach
    PI - -> S : vazão calculada
    S -> H : setFlowRate(vazão)
    H -> PO : updateFlow()
    S -> S : sleep(100ms)
end

== Thread de Imagem ==
loop A cada 1m³
    S -> I : generateHidrometerImage()
    I -> H : getVolume()
    I -> H : getFlowRate()
    I -> I : drawPointer()
    I -> I : drawDisplay()
    I -> I : saveImage()
    S -> S : sleep(500ms)
end

== Thread Principal ==
loop Monitoramento
    U -> M : pressiona tecla
    alt tecla == 'q'
        M -> S : stop()
        S -> S : running = false
    else tecla == 's'
        M -> S : getStatus()
        S - -> M : volume, vazão, status
        M - -> U : exibe informações
    end
end

== Finalização ==
deactivate S
S -> H : destructor
S -> I : destructor
M - -> U : Programa encerrado

note over S
  Padrão Observer
  Threads observam estado
  atomicamente
end note

note over H
  Thread Safety
  atomic<bool>, atomic<float>
  para sincronização
end note

note over PI, PO
  Strategy Pattern
  Diferentes estratégias
  para regime laminar/turbulento
end note

@enduml

PlantUML version 1.2020.02(Sun Mar 01 07:22:07 BRT 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.28+6-post-Ubuntu-1ubuntu122.04.1
Operating System: Linux
Default Encoding: UTF-8
Language: pt
Country: BR
--></g></svg>